<!DOCTYPE html>
<html lang="es" data-palette="cyber">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Writeups | x224 CyberSec</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="writeups.css">
</head>
<body>

  <canvas id="matrix-canvas"></canvas>
  <div class="scanline"></div>

  <!-- NAVBAR -->
  <nav class="navbar">
    <a class="navbar__logo" href="index.html">x<em>224</em></a>
    <ul class="navbar__nav">
      <li><a href="index.html#about">whoami</a></li>
      <li><a href="index.html#sections">secciones</a></li>
      <li><a href="index.html#terminal">terminal</a></li>
      <li><a href="writeups.html" class="active">writeups</a></li>
      <li><a href="forensics.html">forense</a></li>
      <li><a href="certifications.html">certificaciones</a></li>
    </ul>
    <div class="palette-switcher" title="Cambiar paleta de colores">
      <button class="pal-btn active" data-p="cyber"  title="Azul Cibern√©tico"></button>
      <button class="pal-btn"       data-p="matrix" title="Verde Matrix"></button>
      <button class="pal-btn"       data-p="red"    title="Rojo Sangre"></button>
      <button class="pal-btn"       data-p="purple" title="P√∫rpura Neon"></button>
      <button class="pal-btn"       data-p="amber"  title="√Åmbar Hacker"></button>
    </div>
  </nav>

  <div class="container">

    <!-- HEADER -->
    <header class="page-header">
      <a href="index.html" class="back-link">‚Üê Volver al Portfolio</a>
      <h1><span>CTF</span> Writeups</h1>
      <p class="page-header__sub">Documentaci√≥n completa de m√°quinas resueltas y t√©cnicas de pentesting</p>
      <div class="header-stats">
        <div class="header-stat"><strong id="stat-total">0</strong>m√°quinas totales</div>
        <div class="header-stat"><strong id="stat-htb">0</strong>Hack The Box</div>
        <div class="header-stat"><strong id="stat-thm">0</strong>TryHackMe</div>
      </div>
    </header>

    <!-- B√öSQUEDA -->
    <div class="search-bar">
      <span class="search-bar__icon">üîç</span>
      <input type="text" id="searchInput" placeholder="$ buscar por nombre, OS, herramienta o t√©cnica...">
    </div>

    <!-- FILTROS -->
    <div class="filters" id="filterBtns">
      <button class="filter-btn active" data-filter="all">Todos</button>
      <button class="filter-btn" data-filter="easy">Easy</button>
      <button class="filter-btn" data-filter="medium">Medium</button>
      <button class="filter-btn" data-filter="hard">Hard</button>
      <button class="filter-btn" data-filter="windows">Windows</button>
      <button class="filter-btn" data-filter="linux">Linux</button>
    </div>

    <!-- TABLA -->
    <div class="table-wrap">
      <table id="machinesTable">
        <thead>
          <tr>
            <th>M√°quina</th>
            <th>Dificultad</th>
            <th>OS</th>
            <th>Plataforma</th>
            <th>Herramientas</th>
            <th>T√©cnicas</th>
          </tr>
        </thead>
        <tbody id="table-body"></tbody>
      </table>
      <p class="no-results" id="noResults">
        No se encontraron resultados para <span id="noResultsQuery"></span>
      </p>
    </div>

  </div>

  <footer>
    <div>
      <a href="https://linkedin.com/in/x224" target="_blank">LinkedIn</a>
      <a href="mailto:x224@example.com">Contact</a>
    </div>
    <div style="margin-top:0.8rem;">&copy; 2026 x224 ¬∑ Penetration Testing &amp; Forensics &amp; Cybersecurity</div>
  </footer>

  <!-- data.js PRIMERO ‚Äî define window.MACHINES -->
  <script src="data.js"></script>
  <script src="main.js"></script>
  <script>
  /* ============================================================
     WRITEUPS.JS ‚Äî usa window.MACHINES de data.js
     Para a√±adir m√°quinas: edita data.js
     ============================================================ */

  const MACHINES = window.MACHINES || [];

  const OS_LABEL   = { windows: 'ü™ü Windows', linux: 'üêß Linux', other: '‚ùì Other' };
  const PLAT_LABEL = { htb: 'Hack The Box',  thm: 'TryHackMe',  other: 'Other'    };

  function escHtml(s) {
    return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  }

  function renderRow(m) {
    const tr = document.createElement('tr');
    tr.dataset.diff = m.difficulty;
    tr.dataset.os   = m.os;
    if (m.pdf) tr.addEventListener('click', () => window.open(m.pdf, '_blank'));

    tr.innerHTML = `
      <td>
        <div class="machine-name">
          <span class="machine-dot"></span>
          ${escHtml(m.name)}
          ${m.pdf ? '<span style="color:var(--text-muted);font-size:0.75rem;margin-left:4px" title="PDF disponible">üìÑ</span>' : ''}
        </div>
      </td>
      <td><span class="badge badge-${m.difficulty}">${m.difficulty.charAt(0).toUpperCase() + m.difficulty.slice(1)}</span></td>
      <td><span class="os-badge">${OS_LABEL[m.os] || escHtml(m.os)}</span></td>
      <td><span style="color:var(--text-2);font-size:0.82rem">${PLAT_LABEL[m.platform] || escHtml(m.platform)}</span></td>
      <td><div class="tools-list">${m.tools.map(t => `<span class="tool-tag">${escHtml(t)}</span>`).join('')}</div></td>
      <td><div class="techniques-list">${m.techniques.map(t => `<div class="technique-item">${escHtml(t)}</div>`).join('')}</div></td>
    `;
    return tr;
  }

  function populate(list) {
    const tbody = document.getElementById('table-body');
    tbody.innerHTML = '';
    list.forEach(m => tbody.appendChild(renderRow(m)));
  }

  populate(MACHINES);

  document.getElementById('stat-total').textContent = MACHINES.length;
  document.getElementById('stat-htb').textContent   = MACHINES.filter(m => m.platform === 'htb').length;
  document.getElementById('stat-thm').textContent   = MACHINES.filter(m => m.platform === 'thm').length;

  /* ‚îÄ‚îÄ B√∫squeda + filtros ‚îÄ‚îÄ */
  let activeFilter = 'all';
  let searchTerm   = '';

  function getFiltered() {
    return MACHINES.filter(m => {
      const ok = activeFilter === 'all'     ? true :
                 activeFilter === 'windows' ? m.os === 'windows' :
                 activeFilter === 'linux'   ? m.os === 'linux'   :
                 m.difficulty === activeFilter;
      const hay = [m.name, m.difficulty, m.os, m.platform, ...m.tools, ...m.techniques]
                    .join(' ').toLowerCase();
      return ok && (!searchTerm || hay.includes(searchTerm.toLowerCase()));
    });
  }

  function update() {
    const list = getFiltered();
    populate(list);
    const noRes = document.getElementById('noResults');
    noRes.style.display = list.length === 0 ? 'block' : 'none';
    document.getElementById('noResultsQuery').textContent = `"${searchTerm || activeFilter}"`;
  }

  document.getElementById('searchInput').addEventListener('input', e => {
    searchTerm = e.target.value;
    update();
  });

  document.getElementById('filterBtns').addEventListener('click', e => {
    const btn = e.target.closest('.filter-btn');
    if (!btn) return;
    activeFilter = btn.dataset.filter;
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.toggle('active', b === btn));
    update();
  });
  </script>

</body>
</html>
